<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>BitLife | Penguin Labs</title>
    <style>
      /* 1. Black background for the whole screen */
      body, html {
        margin: 0; padding: 0; width: 100%; height: 100%;
        background: #000 !important;
        overflow: hidden;
        display: flex; justify-content: center; align-items: center;
      }

      /* 2. The "Outer Box" - This is your hitbox/visual frame */
      #scaler-box {
        width: 400px; /* Small width */
        height: 711px; /* 9:16 Ratio */
        position: relative;
        overflow: hidden;
        background: #000;
        border: 2px solid #333; /* Visual border to see the box */
      }

      /* 3. The "Inner Game" - We let Unity THINK it's big, then shrink it */
      #gameContainer {
        width: 100% !important;
        height: 100% !important;
        position: absolute;
        top: 0;
        left: 0;
      }

      canvas {
        width: 100% !important;
        height: 100% !important;
      }
    </style>
  </head>
  <body>

    <div id="scaler-box">
        <div id="gameContainer"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/bitlife-life-simulator/bitlife-life-simulator.github.io/Build/UnityLoader.js"></script>
    <script>
      // Instantiate normally. The CSS 'scaler-box' will now do the heavy lifting.
      var gameInstance = UnityLoader.instantiate(
        "gameContainer", 
        "https://cdn.jsdelivr.net/gh/bitlife-life-simulator/bitlife-life-simulator.github.io/Build/BitLife.json",
        {
            onProgress: function(instance, progress) {
                if (progress === 1) {
                    // Final force to ensure the canvas stays inside the 400px box
                    document.querySelector('canvas').style.position = "static";
                    window.dispatchEvent(new Event('resize'));
                }
            }
        }
      );
      
      // Force a resize event every few seconds to keep the UI buttons from drifting
      setInterval(function() {
          window.dispatchEvent(new Event('resize'));
      }, 3000);
    </script>
  </body>
</html>