<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>BitLife | Penguin Labs</title>
    <style>
      body, html {
        margin: 0; padding: 0; width: 100%; height: 100%;
        background: #000 !important;
        overflow: hidden;
        display: flex; justify-content: center; align-items: center;
      }

      /* This is the magic container */
      #game-wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #gameContainer {
        /* We force the game to load at a high resolution so it's not blurry */
        width: 1080px !important;
        height: 1920px !important;
        
        /* Then we shrink it to fit your specific screen height */
        transform: scale(calc(var(--scale-factor, 0.5)));
        transform-origin: center center;
      }

      canvas {
        width: 100% !important;
        height: 100% !important;
      }
    </style>
  </head>
  <body>

    <div id="game-wrapper">
        <div id="gameContainer"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/bitlife-life-simulator/bitlife-life-simulator.github.io/Build/UnityLoader.js"></script>
    <script>
      // Function to calculate exactly how much to shrink the game
      function updateScale() {
        const screenHeight = window.innerHeight;
        // BitLife natural height is 1920. We want it to be 95% of your screen.
        const scale = (screenHeight * 0.95) / 1920;
        document.documentElement.style.setProperty('--scale-factor', scale);
      }

      window.addEventListener('resize', updateScale);
      updateScale();

      var gameInstance = UnityLoader.instantiate(
        "gameContainer", 
        "https://cdn.jsdelivr.net/gh/bitlife-life-simulator/bitlife-life-simulator.github.io/Build/BitLife.json",
        {
            onProgress: function(instance, progress) {
                if (progress === 1) {
                    updateScale();
                    window.dispatchEvent(new Event('resize'));
                }
            }
        }
      );
    </script>
  </body>
</html>