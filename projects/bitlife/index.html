<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>BitLife | Penguin Labs</title>
    <style>
      /* 1. Reset background to black */
      body, html {
        margin: 0; padding: 0; width: 100%; height: 100%;
        background: #000 !important;
        overflow: hidden;
        display: flex; justify-content: center; align-items: center;
      }

      /* 2. The Dynamic Container */
      #game-wrapper {
        /* This forces the game to always be a 9:16 rectangle */
        /* It will grow to fit the height of the screen automatically */
        height: 100vh;
        aspect-ratio: 9 / 16;
        
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        background: #000;
      }

      /* 3. The Actual Unity Container */
      #gameContainer {
        width: 100% !important;
        height: 100% !important;
      }

      /* 4. The Canvas Lock */
      canvas {
        width: 100% !important;
        height: 100% !important;
        display: block;
      }
    </style>
  </head>
  <body>

    <div id="game-wrapper">
      <div id="gameContainer"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/bitlife-life-simulator/bitlife-life-simulator.github.io/Build/UnityLoader.js"></script>
    <script>
      // Instantiate the game
      var gameInstance = UnityLoader.instantiate(
        "gameContainer", 
        "https://cdn.jsdelivr.net/gh/bitlife-life-simulator/bitlife-life-simulator.github.io/Build/BitLife.json",
        {
          onProgress: function(instance, progress) {
            if (progress === 1) {
              console.log("Loaded");
              // Force a layout refresh
              syncResolution();
            }
          }
        }
      );

      // This function fixes the "Zoomed In" look by telling Unity 
      // the exact pixels it should be using internally.
      function syncResolution() {
        const canvas = document.querySelector('canvas');
        if (canvas) {
          // We set internal resolution to High Definition (1080p)
          // The CSS 'aspect-ratio' handles the stretching/bars.
          canvas.width = 1080;
          canvas.height = 1920;
          window.dispatchEvent(new Event('resize'));
        }
      }

      // Listen for the Fullscreen change event
      window.addEventListener('resize', syncResolution);
      document.addEventListener('fullscreenchange', syncResolution);
      
      // Run every few seconds to prevent Unity from breaking the ratio
      setInterval(syncResolution, 2000);
    </script>
  </body>
</html>